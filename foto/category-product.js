/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. MIT license */

/*! matchMedia() polyfill addListener/removeListener extension. Author & copyright (c) 2012: Scott Jehl. Dual MIT/BSD license */


!function(t,i){"function"==typeof define&&define.amd?define("Amasty_Label/vendor/tooltipster/js/tooltipster.min",["jquery"],function(t){return i(t)}):"object"==typeof exports?module.exports=i(require("jquery")):i(jQuery)}(0,function(t){function i(t){this.$container,this.constraints=null,this.__$tooltip,this.__init(t)}function e(i,e){var o=!0;return t.each(i,function(t,n){if(void 0===e[t]||i[t]!==e[t])return o=!1,!1}),o}function o(i){var e=i.attr("id"),o=e?r.window.document.getElementById(e):null;return o?o===i[0]:t.contains(r.window.document.body,i[0])}var n={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999,styles:{backgroundColor:"",textColor:""}},s="undefined"!=typeof window?window:null,r={hasTouchCapability:!(!s||!("ontouchstart"in s||s.DocumentTouch&&s.document instanceof s.DocumentTouch||s.navigator.maxTouchPoints)),hasTransitions:function(){if(!s)return!1;var t=(s.document.body||s.document.documentElement).style,i="transition",e=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof t[i])return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var o=0;o<e.length;o++)if("string"==typeof t[e[o]+i])return!0;return!1}(),IE:!1,semVer:"4.2.8",window:s},a=function(){this.__$emitterPrivate=t({}),this.__$emitterPublic=t({}),this.__instancesLatestArr=[],this.__plugins={},this._env=r};a.prototype={__bridge:function(i,e,o){if(!e[o]){var s=function(){};s.prototype=i;var r=new s;r.__init&&r.__init(e),t.each(i,function(t,i){0!=t.indexOf("__")&&(e[t]?n.debug&&console.log("The "+t+" method of the "+o+" plugin conflicts with another plugin or native methods"):(e[t]=function(){return r[t].apply(r,Array.prototype.slice.apply(arguments))},e[t].bridged=r))}),e[o]=r}return this},__setWindow:function(t){return r.window=t,this},_getRuler:function(t){return new i(t)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(i){if("string"==typeof i){var e=i,o=null;return e.indexOf(".")>0?o=this.__plugins[e]:t.each(this.__plugins,function(t,i){if(i.name.substring(i.name.length-e.length-1)=="."+e)return o=i,!1}),o}if(i.name.indexOf(".")<0)throw new Error("Plugins must be namespaced");return this.__plugins[i.name]=i,i.core&&this.__bridge(i.core,this,i.name),this},_trigger:function(){var t=Array.prototype.slice.apply(arguments);return"string"==typeof t[0]&&(t[0]={type:t[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,t),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,t),this},instances:function(i){var e=[];return t(i||".tooltipstered").each(function(){var i=t(this),o=i.data("tooltipster-ns");o&&t.each(o,function(t,o){e.push(i.data(o))})}),e},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(i){return t((i?i+" ":"")+".tooltipstered").toArray()},setDefaults:function(i){return t.extend(n,i),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},t.tooltipster=new a,t.Tooltipster=function(i,e){this.__callbacks={close:[],open:[]},this.__closingTime,this.__Content,this.__contentBcr,this.__destroyed=!1,this.__$emitterPrivate=t({}),this.__$emitterPublic=t({}),this.__enabled=!0,this.__garbageCollector,this.__Geometry,this.__lastPosition,this.__namespace="tooltipster-"+Math.round(1e6*Math.random()),this.__options,this.__$originParents,this.__pointerIsOverOrigin=!1,this.__previousThemes=[],this.__state="closed",this.__timeouts={close:[],open:null},this.__touchEvents=[],this.__tracker=null,this._$origin,this._$tooltip,this.__init(i,e)},t.Tooltipster.prototype={__init:function(i,e){var o=this;if(o._$origin=t(i),o.__options=t.extend(!0,{},n,e),o.__optionsFormat(),!r.IE||r.IE>=o.__options.IEmin){var s=null;if(void 0===o._$origin.data("tooltipster-initialTitle")&&(void 0===(s=o._$origin.attr("title"))&&(s=null),o._$origin.data("tooltipster-initialTitle",s)),null!==o.__options.content)o.__contentSet(o.__options.content);else{var a,l=o._$origin.attr("data-tooltip-content");l&&(a=t(l)),a&&a[0]?o.__contentSet(a.first()):o.__contentSet(s)}o._$origin.removeAttr("title").addClass("tooltipstered"),o.__prepareOrigin(),o.__prepareGC(),t.each(o.__options.plugins,function(t,i){o._plug(i)}),r.hasTouchCapability&&t(r.window.document.body).on("touchmove."+o.__namespace+"-triggerOpen",function(t){o._touchRecordEvent(t)}),o._on("created",function(){o.__prepareTooltip()})._on("repositioned",function(t){o.__lastPosition=t.position})}else o.__options.disabled=!0},__contentInsert:function(){var t=this._$tooltip.find(".tooltipster-content"),i=this.__Content;return this._trigger({type:"format",content:this.__Content,format:function(t){i=t}}),this.__options.functionFormat&&(i=this.__options.functionFormat.call(this,this,{origin:this._$origin[0]},this.__Content)),"string"!=typeof i||this.__options.contentAsHTML?t.empty().append(i):t.text(i),this},__contentSet:function(i){return i instanceof t&&this.__options.contentCloning&&(i=i.clone(!0)),this.__Content=i,this._trigger({type:"updated",content:i}),this},__destroyError:function(){throw new Error("This tooltip has been destroyed and cannot execute your method call.")},__geometry:function(){var i=this._$origin,e=this._$origin.is("area");if(e){var o=this._$origin.parent().attr("name");i=t('img[usemap="#'+o+'"]')}var n=i[0].getBoundingClientRect(),s=t(r.window.document),a=t(r.window),l=i,_={available:{document:null,window:null},document:{size:{height:s.height(),width:s.width()}},window:{scroll:{left:r.window.scrollX||r.window.document.documentElement.scrollLeft,top:r.window.scrollY||r.window.document.documentElement.scrollTop},size:{height:a.height(),width:a.width()}},origin:{fixedLineage:!1,offset:{},size:{height:n.bottom-n.top,width:n.right-n.left},usemapImage:e?i[0]:null,windowOffset:{bottom:n.bottom,left:n.left,right:n.right,top:n.top}}};if(e){var h=this._$origin.attr("shape"),c=this._$origin.attr("coords");if(c&&(c=c.split(","),t.map(c,function(t,i){c[i]=parseInt(t)})),"default"!=h)switch(h){case"circle":var p=c[0],d=c[1],u=c[2],g=d-u,f=p-u;_.origin.size.height=2*u,_.origin.size.width=_.origin.size.height,_.origin.windowOffset.left+=f,_.origin.windowOffset.top+=g;break;case"rect":var m=c[0],w=c[1],v=c[2],y=c[3];_.origin.size.height=y-w,_.origin.size.width=v-m,_.origin.windowOffset.left+=m,_.origin.windowOffset.top+=w;break;case"poly":for(var b=0,$=0,C=0,x=0,O="even",E=0;E<c.length;E++){var z=c[E];"even"==O?(z>C&&(C=z,0===E&&(b=C)),z<b&&(b=z),O="odd"):(z>x&&(x=z,1==E&&($=x)),z<$&&($=z),O="even")}_.origin.size.height=x-$,_.origin.size.width=C-b,_.origin.windowOffset.left+=b,_.origin.windowOffset.top+=$}}for(this._trigger({type:"geometry",edit:function(t){_.origin.size.height=t.height,_.origin.windowOffset.left=t.left,_.origin.windowOffset.top=t.top,_.origin.size.width=t.width},geometry:{height:_.origin.size.height,left:_.origin.windowOffset.left,top:_.origin.windowOffset.top,width:_.origin.size.width}}),_.origin.windowOffset.right=_.origin.windowOffset.left+_.origin.size.width,_.origin.windowOffset.bottom=_.origin.windowOffset.top+_.origin.size.height,_.origin.offset.left=_.origin.windowOffset.left+_.window.scroll.left,_.origin.offset.top=_.origin.windowOffset.top+_.window.scroll.top,_.origin.offset.bottom=_.origin.offset.top+_.origin.size.height,_.origin.offset.right=_.origin.offset.left+_.origin.size.width,_.available.document={bottom:{height:_.document.size.height-_.origin.offset.bottom,width:_.document.size.width},left:{height:_.document.size.height,width:_.origin.offset.left},right:{height:_.document.size.height,width:_.document.size.width-_.origin.offset.right},top:{height:_.origin.offset.top,width:_.document.size.width}},_.available.window={bottom:{height:Math.max(_.window.size.height-Math.max(_.origin.windowOffset.bottom,0),0),width:_.window.size.width},left:{height:_.window.size.height,width:Math.max(_.origin.windowOffset.left,0)},right:{height:_.window.size.height,width:Math.max(_.window.size.width-Math.max(_.origin.windowOffset.right,0),0)},top:{height:Math.max(_.origin.windowOffset.top,0),width:_.window.size.width}};"html"!=l[0].tagName.toLowerCase();){if("fixed"==l.css("position")){_.origin.fixedLineage=!0;break}l=l.parent()}return _},__optionsFormat:function(){return"number"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),"number"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),"number"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),"string"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=t(r.window.document.body):"string"==typeof this.__options.parent&&(this.__options.parent=t(this.__options.parent)),"hover"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):"click"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var i=this;return i.__options.selfDestruction?i.__garbageCollector=setInterval(function(){var e=(new Date).getTime();i.__touchEvents=t.grep(i.__touchEvents,function(t,i){return e-t.time>6e4}),o(i._$origin)||i.close(function(){i.destroy()})},2e4):clearInterval(i.__garbageCollector),i},__prepareOrigin:function(){var t=this;if(t._$origin.off("."+t.__namespace+"-triggerOpen"),r.hasTouchCapability&&t._$origin.on("touchstart."+t.__namespace+"-triggerOpen touchend."+t.__namespace+"-triggerOpen touchcancel."+t.__namespace+"-triggerOpen",function(i){t._touchRecordEvent(i)}),t.__options.triggerOpen.click||t.__options.triggerOpen.tap&&r.hasTouchCapability){var i="";t.__options.triggerOpen.click&&(i+="click."+t.__namespace+"-triggerOpen "),t.__options.triggerOpen.tap&&r.hasTouchCapability&&(i+="touchend."+t.__namespace+"-triggerOpen"),t._$origin.on(i,function(i){t._touchIsMeaningfulEvent(i)&&t._open(i)})}return(t.__options.triggerOpen.mouseenter||t.__options.triggerOpen.touchstart&&r.hasTouchCapability)&&(i="",t.__options.triggerOpen.mouseenter&&(i+="mouseenter."+t.__namespace+"-triggerOpen "),t.__options.triggerOpen.touchstart&&r.hasTouchCapability&&(i+="touchstart."+t.__namespace+"-triggerOpen"),t._$origin.on(i,function(i){!t._touchIsTouchEvent(i)&&t._touchIsEmulatedEvent(i)||(t.__pointerIsOverOrigin=!0,t._openShortly(i))})),(t.__options.triggerClose.mouseleave||t.__options.triggerClose.touchleave&&r.hasTouchCapability)&&(i="",t.__options.triggerClose.mouseleave&&(i+="mouseleave."+t.__namespace+"-triggerOpen "),t.__options.triggerClose.touchleave&&r.hasTouchCapability&&(i+="touchend."+t.__namespace+"-triggerOpen touchcancel."+t.__namespace+"-triggerOpen"),t._$origin.on(i,function(i){t._touchIsMeaningfulEvent(i)&&(t.__pointerIsOverOrigin=!1)})),t},__prepareTooltip:function(){var i=this,e=i.__options.interactive?"auto":"";return i._$tooltip.attr("id",i.__namespace).css({"pointer-events":e,zIndex:i.__options.zIndex}),t.each(i.__previousThemes,function(t,e){i._$tooltip.removeClass(e)}),t.each(i.__options.theme,function(t,e){i._$tooltip.addClass(e)}),i.__previousThemes=t.merge([],i.__options.theme),i},__scrollHandler:function(i){if(this.__options.triggerClose.scroll)this._close(i);else if(o(this._$origin)&&o(this._$tooltip)){var e=null;if(i.target===r.window.document)this.__Geometry.origin.fixedLineage||this.__options.repositionOnScroll&&this.reposition(i);else{e=this.__geometry();var n=!1;if("fixed"!=this._$origin.css("position")&&this.__$originParents.each(function(i,o){var s=t(o),r=s.css("overflow-x"),a=s.css("overflow-y");if("visible"!=r||"visible"!=a){var l=o.getBoundingClientRect();if("visible"!=r&&(e.origin.windowOffset.left<l.left||e.origin.windowOffset.right>l.right))return n=!0,!1;if("visible"!=a&&(e.origin.windowOffset.top<l.top||e.origin.windowOffset.bottom>l.bottom))return n=!0,!1}if("fixed"==s.css("position"))return!1}),n)this._$tooltip.css("visibility","hidden");else if(this._$tooltip.css("visibility","visible"),this.__options.repositionOnScroll)this.reposition(i);else{var s=e.origin.offset.left-this.__Geometry.origin.offset.left,a=e.origin.offset.top-this.__Geometry.origin.offset.top;this._$tooltip.css({left:this.__lastPosition.coord.left+s,top:this.__lastPosition.coord.top+a})}}this._trigger({type:"scroll",event:i,geo:e})}return this},__stateSet:function(t){return this.__state=t,this._trigger({type:"state",state:t}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,t.each(this.__timeouts.close,function(t,i){clearTimeout(i)}),this.__timeouts.close=[],this},__trackerStart:function(){var t=this,i=t._$tooltip.find(".tooltipster-content");return t.__options.trackTooltip&&(t.__contentBcr=i[0].getBoundingClientRect()),t.__tracker=setInterval(function(){if(o(t._$origin)&&o(t._$tooltip)){if(t.__options.trackOrigin){var n=t.__geometry(),s=!1;e(n.origin.size,t.__Geometry.origin.size)&&(t.__Geometry.origin.fixedLineage?e(n.origin.windowOffset,t.__Geometry.origin.windowOffset)&&(s=!0):e(n.origin.offset,t.__Geometry.origin.offset)&&(s=!0)),s||(t.__options.triggerClose.mouseleave?t._close():t.reposition())}if(t.__options.trackTooltip){var r=i[0].getBoundingClientRect();r.height===t.__contentBcr.height&&r.width===t.__contentBcr.width||(t.reposition(),t.__contentBcr=r)}}else t._close()},t.__options.trackerInterval),t},_close:function(i,e,o){var n=this,s=!0;if(n._trigger({type:"close",event:i,stop:function(){s=!1}}),s||o){e&&n.__callbacks.close.push(e),n.__callbacks.open=[],n.__timeoutsClear();var a=function(){t.each(n.__callbacks.close,function(t,e){e.call(n,n,{event:i,origin:n._$origin[0]})}),n.__callbacks.close=[]};if("closed"!=n.__state){var l=!0,_=(new Date).getTime()+n.__options.animationDuration[1];if("disappearing"==n.__state&&_>n.__closingTime&&n.__options.animationDuration[1]>0&&(l=!1),l){n.__closingTime=_,"disappearing"!=n.__state&&n.__stateSet("disappearing");var h=function(){clearInterval(n.__tracker),n._trigger({type:"closing",event:i}),n._$tooltip.off("."+n.__namespace+"-triggerClose").removeClass("tooltipster-dying"),t(r.window).off("."+n.__namespace+"-triggerClose"),n.__$originParents.each(function(i,e){t(e).off("scroll."+n.__namespace+"-triggerClose")}),n.__$originParents=null,t(r.window.document.body).off("."+n.__namespace+"-triggerClose"),n._$origin.off("."+n.__namespace+"-triggerClose"),n._off("dismissable"),n.__stateSet("closed"),n._trigger({type:"after",event:i}),n.__options.functionAfter&&n.__options.functionAfter.call(n,n,{event:i,origin:n._$origin[0]}),a()};r.hasTransitions?(n._$tooltip.css({"-moz-animation-duration":n.__options.animationDuration[1]+"ms","-ms-animation-duration":n.__options.animationDuration[1]+"ms","-o-animation-duration":n.__options.animationDuration[1]+"ms","-webkit-animation-duration":n.__options.animationDuration[1]+"ms","animation-duration":n.__options.animationDuration[1]+"ms","transition-duration":n.__options.animationDuration[1]+"ms"}),n._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),n.__options.animationDuration[1]>0&&n._$tooltip.delay(n.__options.animationDuration[1]),n._$tooltip.queue(h)):n._$tooltip.stop().fadeOut(n.__options.animationDuration[1],h)}}else a()}return n},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(i,e){var n=this;if(!n.__destroying&&o(n._$origin)&&n.__enabled){var s=!0;if("closed"==n.__state&&(n._trigger({type:"before",event:i,stop:function(){s=!1}}),s&&n.__options.functionBefore&&(s=n.__options.functionBefore.call(n,n,{event:i,origin:n._$origin[0]}))),!1!==s&&null!==n.__Content){e&&n.__callbacks.open.push(e),n.__callbacks.close=[],n.__timeoutsClear();var a,l=function(){"stable"!=n.__state&&n.__stateSet("stable"),t.each(n.__callbacks.open,function(t,i){i.call(n,n,{origin:n._$origin[0],tooltip:n._$tooltip[0]})}),n.__callbacks.open=[]};if("closed"!==n.__state)a=0,"disappearing"===n.__state?(n.__stateSet("appearing"),r.hasTransitions?(n._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),n.__options.animationDuration[0]>0&&n._$tooltip.delay(n.__options.animationDuration[0]),n._$tooltip.queue(l)):n._$tooltip.stop().fadeIn(l)):"stable"==n.__state&&l();else{if(n.__stateSet("appearing"),a=n.__options.animationDuration[0],n.__contentInsert(),n.reposition(i,!0),r.hasTransitions?(n._$tooltip.addClass("tooltipster-"+n.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":n.__options.animationDuration[0]+"ms","-ms-animation-duration":n.__options.animationDuration[0]+"ms","-o-animation-duration":n.__options.animationDuration[0]+"ms","-webkit-animation-duration":n.__options.animationDuration[0]+"ms","animation-duration":n.__options.animationDuration[0]+"ms","transition-duration":n.__options.animationDuration[0]+"ms"}),setTimeout(function(){"closed"!=n.__state&&(n._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),n.__options.animationDuration[0]>0&&n._$tooltip.delay(n.__options.animationDuration[0]),n._$tooltip.queue(l))},0)):n._$tooltip.css("display","none").fadeIn(n.__options.animationDuration[0],l),n.__trackerStart(),t(r.window).on("resize."+n.__namespace+"-triggerClose",function(i){var e=t(document.activeElement);(e.is("input")||e.is("textarea"))&&t.contains(n._$tooltip[0],e[0])||n.reposition(i)}).on("scroll."+n.__namespace+"-triggerClose",function(t){n.__scrollHandler(t)}),n.__$originParents=n._$origin.parents(),n.__$originParents.each(function(i,e){t(e).on("scroll."+n.__namespace+"-triggerClose",function(t){n.__scrollHandler(t)})}),n.__options.triggerClose.mouseleave||n.__options.triggerClose.touchleave&&r.hasTouchCapability){n._on("dismissable",function(t){t.dismissable?t.delay?(p=setTimeout(function(){n._close(t.event)},t.delay),n.__timeouts.close.push(p)):n._close(t):clearTimeout(p)});var _=n._$origin,h="",c="",p=null;n.__options.interactive&&(_=_.add(n._$tooltip)),n.__options.triggerClose.mouseleave&&(h+="mouseenter."+n.__namespace+"-triggerClose ",c+="mouseleave."+n.__namespace+"-triggerClose "),n.__options.triggerClose.touchleave&&r.hasTouchCapability&&(h+="touchstart."+n.__namespace+"-triggerClose",c+="touchend."+n.__namespace+"-triggerClose touchcancel."+n.__namespace+"-triggerClose"),_.on(c,function(t){if(n._touchIsTouchEvent(t)||!n._touchIsEmulatedEvent(t)){var i="mouseleave"==t.type?n.__options.delay:n.__options.delayTouch;n._trigger({delay:i[1],dismissable:!0,event:t,type:"dismissable"})}}).on(h,function(t){!n._touchIsTouchEvent(t)&&n._touchIsEmulatedEvent(t)||n._trigger({dismissable:!1,event:t,type:"dismissable"})})}n.__options.triggerClose.originClick&&n._$origin.on("click."+n.__namespace+"-triggerClose",function(t){n._touchIsTouchEvent(t)||n._touchIsEmulatedEvent(t)||n._close(t)}),(n.__options.triggerClose.click||n.__options.triggerClose.tap&&r.hasTouchCapability)&&setTimeout(function(){if("closed"!=n.__state){var i="",e=t(r.window.document.body);n.__options.triggerClose.click&&(i+="click."+n.__namespace+"-triggerClose "),n.__options.triggerClose.tap&&r.hasTouchCapability&&(i+="touchend."+n.__namespace+"-triggerClose"),e.on(i,function(i){n._touchIsMeaningfulEvent(i)&&(n._touchRecordEvent(i),n.__options.interactive&&t.contains(n._$tooltip[0],i.target)||n._close(i))}),n.__options.triggerClose.tap&&r.hasTouchCapability&&e.on("touchstart."+n.__namespace+"-triggerClose",function(t){n._touchRecordEvent(t)})}},0),n._trigger("ready"),n.__options.functionReady&&n.__options.functionReady.call(n,n,{origin:n._$origin[0],tooltip:n._$tooltip[0]})}n.__options.timer>0&&(p=setTimeout(function(){n._close()},n.__options.timer+a),n.__timeouts.close.push(p))}}return n},_openShortly:function(t){var i=this,e=!0;if("stable"!=i.__state&&"appearing"!=i.__state&&!i.__timeouts.open&&(i._trigger({type:"start",event:t,stop:function(){e=!1}}),e)){var o=0==t.type.indexOf("touch")?i.__options.delayTouch:i.__options.delay;o[0]?i.__timeouts.open=setTimeout(function(){i.__timeouts.open=null,i.__pointerIsOverOrigin&&i._touchIsMeaningfulEvent(t)?(i._trigger("startend"),i._open(t)):i._trigger("startcancel")},o[0]):(i._trigger("startend"),i._open(t))}return i},_optionsExtract:function(i,e){var o=this,n=t.extend(!0,{},e),s=o.__options[i];return s||(s={},t.each(e,function(t,i){var e=o.__options[t];void 0!==e&&(s[t]=e)})),t.each(n,function(i,e){void 0!==s[i]&&("object"!=typeof e||e instanceof Array||null==e||"object"!=typeof s[i]||s[i]instanceof Array||null==s[i]?n[i]=s[i]:t.extend(n[i],s[i]))}),n},_plug:function(i){var e=t.tooltipster._plugin(i);if(!e)throw new Error('The "'+i+'" plugin is not defined');return e.instance&&t.tooltipster.__bridge(e.instance,this,e.name),this},_touchIsEmulatedEvent:function(t){for(var i=!1,e=(new Date).getTime(),o=this.__touchEvents.length-1;o>=0;o--){var n=this.__touchEvents[o];if(!(e-n.time<500))break;n.target===t.target&&(i=!0)}return i},_touchIsMeaningfulEvent:function(t){return this._touchIsTouchEvent(t)&&!this._touchSwiped(t.target)||!this._touchIsTouchEvent(t)&&!this._touchIsEmulatedEvent(t)},_touchIsTouchEvent:function(t){return 0==t.type.indexOf("touch")},_touchRecordEvent:function(t){return this._touchIsTouchEvent(t)&&(t.time=(new Date).getTime(),this.__touchEvents.push(t)),this},_touchSwiped:function(t){for(var i=!1,e=this.__touchEvents.length-1;e>=0;e--){var o=this.__touchEvents[e];if("touchmove"==o.type){i=!0;break}if("touchstart"==o.type&&t===o.target)break}return i},_trigger:function(){var i=Array.prototype.slice.apply(arguments);return"string"==typeof i[0]&&(i[0]={type:i[0]}),i[0].instance=this,i[0].origin=this._$origin?this._$origin[0]:null,i[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,i),t.tooltipster._trigger.apply(t.tooltipster,i),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,i),this},_unplug:function(i){var e=this;if(e[i]){var o=t.tooltipster._plugin(i);o.instance&&t.each(o.instance,function(t,o){e[t]&&e[t].bridged===e[i]&&delete e[t]}),e[i].__destroy&&e[i].__destroy(),delete e[i]}return e},close:function(t){return this.__destroyed?this.__destroyError():this._close(null,t),this},content:function(t){var i=this;if(void 0===t)return i.__Content;if(i.__destroyed)i.__destroyError();else if(i.__contentSet(t),null!==i.__Content){if("closed"!==i.__state&&(i.__contentInsert(),i.reposition(),i.__options.updateAnimation))if(r.hasTransitions){var e=i.__options.updateAnimation;i._$tooltip.addClass("tooltipster-update-"+e),setTimeout(function(){"closed"!=i.__state&&i._$tooltip.removeClass("tooltipster-update-"+e)},1e3)}else i._$tooltip.fadeTo(200,.5,function(){"closed"!=i.__state&&i._$tooltip.fadeTo(200,1)})}else i._close();return i},destroy:function(){var i=this;if(i.__destroyed)i.__destroyError();else{"closed"!=i.__state?i.option("animationDuration",0)._close(null,null,!0):i.__timeoutsClear(),i._trigger("destroy"),i.__destroyed=!0,i._$origin.removeData(i.__namespace).off("."+i.__namespace+"-triggerOpen"),t(r.window.document.body).off("."+i.__namespace+"-triggerOpen");var e=i._$origin.data("tooltipster-ns");if(e)if(1===e.length){var o=null;"previous"==i.__options.restoration?o=i._$origin.data("tooltipster-initialTitle"):"current"==i.__options.restoration&&(o="string"==typeof i.__Content?i.__Content:t("<div></div>").append(i.__Content).html()),o&&i._$origin.attr("title",o),i._$origin.removeClass("tooltipstered"),i._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else e=t.grep(e,function(t,e){return t!==i.__namespace}),i._$origin.data("tooltipster-ns",e);i._trigger("destroyed"),i._off(),i.off(),i.__Content=null,i.__$emitterPrivate=null,i.__$emitterPublic=null,i.__options.parent=null,i._$origin=null,i._$tooltip=null,t.tooltipster.__instancesLatestArr=t.grep(t.tooltipster.__instancesLatestArr,function(t,e){return i!==t}),clearInterval(i.__garbageCollector)}return i},disable:function(){return this.__destroyed?(this.__destroyError(),this):(this._close(),this.__enabled=!1,this)},elementOrigin:function(){if(!this.__destroyed)return this._$origin[0];this.__destroyError()},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(t){return this.close(t)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(t){return this.__destroyed?this.__destroyError():this._open(null,t),this},option:function(i,e){return void 0===e?this.__options[i]:(this.__destroyed?this.__destroyError():(this.__options[i]=e,this.__optionsFormat(),t.inArray(i,["trigger","triggerClose","triggerOpen"])>=0&&this.__prepareOrigin(),"selfDestruction"===i&&this.__prepareGC()),this)},reposition:function(t,i){return this.__destroyed?this.__destroyError():"closed"!=this.__state&&o(this._$origin)&&(i||o(this._$tooltip))&&(i||this._$tooltip.detach(),this.__Geometry=this.__geometry(),this._trigger({type:"reposition",event:t,helper:{geo:this.__Geometry}})),this},show:function(t){return this.open(t)},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:"closed"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},t.fn.tooltipster=function(){var i=Array.prototype.slice.apply(arguments),e="You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.";if(0===this.length)return this;if("string"==typeof i[0]){var o="#*$~&";return this.each(function(){var n=t(this).data("tooltipster-ns"),s=n?t(this).data(n[0]):null;if(!s)throw new Error("You called Tooltipster's \""+i[0]+'" method on an uninitialized element');if("function"!=typeof s[i[0]])throw new Error('Unknown method "'+i[0]+'"');this.length>1&&"content"==i[0]&&(i[1]instanceof t||"object"==typeof i[1]&&null!=i[1]&&i[1].tagName)&&!s.__options.contentCloning&&s.__options.debug&&console.log(e);var r=s[i[0]](i[1],i[2]);if(r!==s||"instance"===i[0])return o=r,!1}),"#*$~&"!==o?o:this}t.tooltipster.__instancesLatestArr=[];var s=i[0]&&void 0!==i[0].multiple,r=s&&i[0].multiple||!s&&n.multiple,a=i[0]&&void 0!==i[0].content,l=a&&i[0].content||!a&&n.content,_=i[0]&&void 0!==i[0].contentCloning,h=_&&i[0].contentCloning||!_&&n.contentCloning,c=i[0]&&void 0!==i[0].debug,p=c&&i[0].debug||!c&&n.debug;return this.length>1&&(l instanceof t||"object"==typeof l&&null!=l&&l.tagName)&&!h&&p&&console.log(e),this.each(function(){var e=!1,o=t(this),n=o.data("tooltipster-ns"),s=null;n?r?e=!0:p&&(console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."),console.log(this)):e=!0,e&&(s=new t.Tooltipster(this,i[0]),n||(n=[]),n.push(s.__namespace),o.data("tooltipster-ns",n),o.data(s.__namespace,s),s.__options.functionInit&&s.__options.functionInit.call(s,s,{origin:this}),s._trigger("init")),t.tooltipster.__instancesLatestArr.push(s)}),this},i.prototype={__init:function(i){this.__$tooltip=i,this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto"),this.$container=t('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(r.window.document.body)},__forceRedraw:function(){var t=this.__$tooltip.parent();this.__$tooltip.detach(),this.__$tooltip.appendTo(t)},constrain:function(t,i){return this.constraints={width:t,height:i},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:t}),this},destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""}),this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){this.__forceRedraw();var t=this.__$tooltip[0].getBoundingClientRect(),i={size:{height:t.height||t.bottom-t.top,width:t.width||t.right-t.left}};if(this.constraints){var e=this.__$tooltip.find(".tooltipster-content"),o=this.__$tooltip.outerHeight(),n=e[0].getBoundingClientRect(),s={height:o<=this.constraints.height,width:t.width<=this.constraints.width&&n.width>=e[0].scrollWidth-1};i.fits=s.height&&s.width}return r.IE&&r.IE<=11&&i.size.width!==r.window.document.documentElement.clientWidth&&(i.size.width=Math.ceil(i.size.width)+1),i}};var l=navigator.userAgent.toLowerCase();return-1!=l.indexOf("msie")?r.IE=parseInt(l.split("msie")[1]):-1!==l.toLowerCase().indexOf("trident")&&-1!==l.indexOf(" rv:11")?r.IE=11:-1!=l.toLowerCase().indexOf("edge/")&&(r.IE=parseInt(l.toLowerCase().split("edge/")[1])),t.tooltipster._plugin({name:"tooltipster.sideTip",instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0,defaultStyles:{backgroundColor:"#fff",textColor:"#000"}}},__init:function(t){var i=this;i.__instance=t,i.__namespace="tooltipster-sideTip-"+Math.round(1e6*Math.random()),i.__previousState="closed",i.__options,i.__optionsFormat(),i.__instance._on("state."+i.__namespace,function(t){"closed"==t.state?i.__close():"appearing"==t.state&&"closed"==i.__previousState&&i.__create(),i.__previousState=t.state}),i.__instance._on("options."+i.__namespace,function(){i.__optionsFormat()}),i.__instance._on("reposition."+i.__namespace,function(t){i.__reposition(t.event,t.helper)})},__close:function(){this.__instance.content()instanceof t&&this.__instance.content().detach(),this.__instance._$tooltip.remove(),this.__instance._$tooltip=null},__create:function(){
var i=this.__instance.__options.styles,e=t('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>');e.find(".tooltipster-box").css({color:i.textColor?i.textColor:this.__options.defaultStyles.textColor,backgroundColor:i.backgroundColor?i.backgroundColor:this.__options.defaultStyles.backgroundColor}),e.find(".tooltipster-arrow-border").css({backgroundColor:i.backgroundColor?i.backgroundColor:this.__options.defaultStyles.backgroundColor}),this.__options.arrow||e.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide(),this.__options.minWidth&&e.css("min-width",this.__options.minWidth+"px"),this.__options.maxWidth&&e.css("max-width",this.__options.maxWidth+"px"),this.__instance._$tooltip=e,this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){this.__options=this.__instance._optionsExtract("tooltipster.sideTip",this.__defaults()),this.__options.position&&(this.__options.side=this.__options.position),"object"!=typeof this.__options.distance&&(this.__options.distance=[this.__options.distance]),this.__options.distance.length<4&&(void 0===this.__options.distance[1]&&(this.__options.distance[1]=this.__options.distance[0]),void 0===this.__options.distance[2]&&(this.__options.distance[2]=this.__options.distance[0]),void 0===this.__options.distance[3]&&(this.__options.distance[3]=this.__options.distance[1])),this.__options.distance={top:this.__options.distance[0],right:this.__options.distance[1],bottom:this.__options.distance[2],left:this.__options.distance[3]},"string"==typeof this.__options.side&&(this.__options.side=[this.__options.side,{top:"bottom",right:"left",bottom:"top",left:"right"}[this.__options.side]],"left"==this.__options.side[0]||"right"==this.__options.side[0]?this.__options.side.push("top","bottom"):this.__options.side.push("right","left")),6===t.tooltipster._env.IE&&!0!==this.__options.arrow&&(this.__options.arrow=!1)},__reposition:function(i,e){var o,n=this,s=n.__targetFind(e),r=[];n.__instance._$tooltip.detach();var a=n.__instance._$tooltip.clone(),l=t.tooltipster._getRuler(a),_=!1,h=n.__instance.option("animation");switch(h&&a.removeClass("tooltipster-"+h),t.each(["window","document"],function(o,h){var c=null;if(n.__instance._trigger({container:h,helper:e,satisfied:_,takeTest:function(t){c=t},results:r,type:"positionTest"}),1==c||0!=c&&0==_&&("window"!=h||n.__options.viewportAware))for(o=0;o<n.__options.side.length;o++){var p={horizontal:0,vertical:0},d=n.__options.side[o];"top"==d||"bottom"==d?p.vertical=n.__options.distance[d]:p.horizontal=n.__options.distance[d],n.__sideChange(a,d),t.each(["natural","constrained"],function(t,o){if(c=null,n.__instance._trigger({container:h,event:i,helper:e,mode:o,results:r,satisfied:_,side:d,takeTest:function(t){c=t},type:"positionTest"}),1==c||0!=c&&0==_){var a={container:h,distance:p,fits:null,mode:o,outerSize:null,side:d,size:null,target:s[d],whole:null},u=("natural"==o?l.free():l.constrain(e.geo.available[h][d].width-p.horizontal,e.geo.available[h][d].height-p.vertical)).measure();if(a.size=u.size,a.outerSize={height:u.size.height+p.vertical,width:u.size.width+p.horizontal},"natural"==o?e.geo.available[h][d].width>=a.outerSize.width&&e.geo.available[h][d].height>=a.outerSize.height?a.fits=!0:a.fits=!1:a.fits=u.fits,"window"==h&&(a.fits?a.whole="top"==d||"bottom"==d?e.geo.origin.windowOffset.right>=n.__options.minIntersection&&e.geo.window.size.width-e.geo.origin.windowOffset.left>=n.__options.minIntersection:e.geo.origin.windowOffset.bottom>=n.__options.minIntersection&&e.geo.window.size.height-e.geo.origin.windowOffset.top>=n.__options.minIntersection:a.whole=!1),r.push(a),a.whole)_=!0;else if("natural"==a.mode&&(a.fits||a.size.width<=e.geo.available[h][d].width))return!1}})}}),n.__instance._trigger({edit:function(t){r=t},event:i,helper:e,results:r,type:"positionTested"}),r.sort(function(t,i){return t.whole&&!i.whole?-1:!t.whole&&i.whole?1:t.whole&&i.whole?(e=n.__options.side.indexOf(t.side))<(o=n.__options.side.indexOf(i.side))?-1:e>o?1:"natural"==t.mode?-1:1:t.fits&&!i.fits?-1:!t.fits&&i.fits?1:t.fits&&i.fits?(e=n.__options.side.indexOf(t.side))<(o=n.__options.side.indexOf(i.side))?-1:e>o?1:"natural"==t.mode?-1:1:"document"==t.container&&"bottom"==t.side&&"natural"==t.mode?-1:1;var e,o}),(o=r[0]).coord={},o.side){case"left":case"right":o.coord.top=Math.floor(o.target-o.size.height/2);break;case"bottom":case"top":o.coord.left=Math.floor(o.target-o.size.width/2)}switch(o.side){case"left":o.coord.left=e.geo.origin.windowOffset.left-o.outerSize.width;break;case"right":o.coord.left=e.geo.origin.windowOffset.right+o.distance.horizontal;break;case"top":o.coord.top=e.geo.origin.windowOffset.top-o.outerSize.height;break;case"bottom":o.coord.top=e.geo.origin.windowOffset.bottom+o.distance.vertical}"window"==o.container?"top"==o.side||"bottom"==o.side?o.coord.left<0?e.geo.origin.windowOffset.right-this.__options.minIntersection>=0?o.coord.left=0:o.coord.left=e.geo.origin.windowOffset.right-this.__options.minIntersection-1:o.coord.left>e.geo.window.size.width-o.size.width&&(e.geo.origin.windowOffset.left+this.__options.minIntersection<=e.geo.window.size.width?o.coord.left=e.geo.window.size.width-o.size.width:o.coord.left=e.geo.origin.windowOffset.left+this.__options.minIntersection+1-o.size.width):o.coord.top<0?e.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0?o.coord.top=0:o.coord.top=e.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:o.coord.top>e.geo.window.size.height-o.size.height&&(e.geo.origin.windowOffset.top+this.__options.minIntersection<=e.geo.window.size.height?o.coord.top=e.geo.window.size.height-o.size.height:o.coord.top=e.geo.origin.windowOffset.top+this.__options.minIntersection+1-o.size.height):(o.coord.left>e.geo.window.size.width-o.size.width&&(o.coord.left=e.geo.window.size.width-o.size.width),o.coord.left<0&&(o.coord.left=0)),n.__sideChange(a,o.side),e.tooltipClone=a[0],e.tooltipParent=n.__instance.option("parent").parent[0],e.mode=o.mode,e.whole=o.whole,e.origin=n.__instance._$origin[0],e.tooltip=n.__instance._$tooltip[0],delete o.container,delete o.fits,delete o.mode,delete o.outerSize,delete o.whole,o.distance=o.distance.horizontal||o.distance.vertical;var c,p,d,u=t.extend(!0,{},o);if(n.__instance._trigger({edit:function(t){o=t},event:i,helper:e,position:u,type:"position"}),n.__options.functionPosition){var g=n.__options.functionPosition.call(n,n.__instance,e,u);g&&(o=g)}l.destroy(),"top"==o.side||"bottom"==o.side?(c={prop:"left",val:o.target-o.coord.left},p=o.size.width-this.__options.minIntersection):(c={prop:"top",val:o.target-o.coord.top},p=o.size.height-this.__options.minIntersection),c.val<this.__options.minIntersection?c.val=this.__options.minIntersection:c.val>p&&(c.val=p),d=e.geo.origin.fixedLineage?e.geo.origin.windowOffset:{left:e.geo.origin.windowOffset.left+e.geo.window.scroll.left,top:e.geo.origin.windowOffset.top+e.geo.window.scroll.top},o.coord={left:d.left+(o.coord.left-e.geo.origin.windowOffset.left),top:d.top+(o.coord.top-e.geo.origin.windowOffset.top)},n.__sideChange(n.__instance._$tooltip,o.side),e.geo.origin.fixedLineage?n.__instance._$tooltip.css("position","fixed"):n.__instance._$tooltip.css("position",""),n.__instance._$tooltip.css({left:o.coord.left,top:o.coord.top,height:o.size.height,width:o.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(c.prop,c.val),n.__instance._$tooltip.appendTo(n.__instance.option("parent")),n.__instance._trigger({type:"repositioned",event:i,position:o})},__sideChange:function(t,i){t.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+i)},__targetFind:function(t){var i={},e=this.__instance._$origin[0].getClientRects();if(e.length>1&&1==this.__instance._$origin.css("opacity")&&(this.__instance._$origin.css("opacity",.99),e=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1)),e.length<2)i.top=Math.floor(t.geo.origin.windowOffset.left+t.geo.origin.size.width/2),i.bottom=i.top,i.left=Math.floor(t.geo.origin.windowOffset.top+t.geo.origin.size.height/2),i.right=i.left;else{var o=e[0];i.top=Math.floor(o.left+(o.right-o.left)/2),o=e.length>2?e[Math.ceil(e.length/2)-1]:e[0],i.right=Math.floor(o.top+(o.bottom-o.top)/2),o=e[e.length-1],i.bottom=Math.floor(o.left+(o.right-o.left)/2),o=e.length>2?e[Math.ceil((e.length+1)/2)-1]:e[e.length-1],i.left=Math.floor(o.top+(o.bottom-o.top)/2)}return i}}}),t}),define("Amasty_Label/js/label",["jquery","underscore"],function(t,i){"use strict";return t.widget("mage.amShowLabel",{options:{},textElement:null,image:null,imageWidth:null,imageHeight:null,parent:null,imageLabel:[".amasty-label-container",".amasty-label-image",".amlabel-text"],fotoramaStage:'[data-fotorama-stage="fotorama__stage"]',galleryPlaceholder:'[data-gallery-role="gallery-placeholder"]',positionWrapper:"amlabel-position-wrapper",mainContainer:'[data-gallery-role="amasty-main-container"]',slickSlider:{selectors:{slider:".slick-slider",slide:".slick-slide"},classes:{cloned:"slick-cloned",initialized:"slick-initialized"}},_create:function(){var i,e,o,n;if(this.parentResizeListener=new ResizeObserver(function(){this.setLabelStyle(),this._refreshSLickSlider()}.bind(this)),this.element=t(this.element),!this.element.attr("amlabel-js-observed")){if(this.element.attr("amlabel-js-observed",1),1===this.options.move){if(i=this.element.closest(".page-wrapper").find(this.getPriceSelector()),!i.length)return void this.element.hide();if(i=this._filterItems(i),e=i.first(),!(o=this.getNewParent(e))||!o.length)return void this.element.hide();e.attr("label-observered-"+this.options.label,"1"),o.append(this.element)}this.image=this.element.find(".amasty-label-image"),this.textElement=this.element.find(".amlabel-text"),this.parent=this.element.parent(),this.image.length||this.setStyleIfNotExist(this.element,{width:"100px",height:"50px"}),!this.image.length&&this.options.position.includes("center")&&this.textElement.addClass("-am-centered"),this.options.path&&""!==this.options.path&&(o=this.parent.find(this.options.path),o.length&&(this.parent=o,o.append(this.element))),"absolute"!==this.parent.css("position")&&"relative"!==this.parent.css("position")&&this.parent.css("position","relative"),"A"!==this.parent.prop("tagName")||this.parent.closest(".block.widget").hasClass("list")||this.parent.css("display","block"),this.element.closest(".sidebar").length||this.element.closest(".product-item-info").css("zIndex","996"),this.imageLoaded(this.image)?(this.element.fadeIn(),this.image[0]&&(this.imageWidth=this.image[0].naturalWidth,this.imageHeight=this.image[0].naturalHeight)):(n=this,this.image.on("load",function(){n.element.fadeIn(),n.imageWidth=this.naturalWidth,n.imageHeight=this.naturalHeight,n.setLabelStyle()})),this.setLabelPosition(),this.updateStyles(),this.productPageZoomEvent(),this.createResizeEvent(),this.createFotoramaEvent(),this.createRedirectEvent(),this._refreshSLickSlider()}},_refreshSLickSlider:function(){var t=this.element.closest(this.slickSlider.selectors.slider);t.length&&t.hasClass(this.slickSlider.classes.initialized)&&t.slick("refresh")},_filterItems:function(i){return i.filter(function(i,e){return!t(e).closest(this.slickSlider.selectors.slide).hasClass(this.slickSlider.classes.cloned)&&!t(e).closest(".amrelated-pack-item").length&&!t(e).closest(".product-item-info").find(".amasty-label-container-"+this.options.label+"-"+this.options.product+"-cat").length}.bind(this))},createRedirectEvent:function(){this.element.on("click",function(t){this.openLink(t)}.bind(this))},openLink:function(t){var i=this.options.redirect_url;i&&!this.isEmpty(i)&&(t.preventDefault(),window.open(i,"_blank"))},createResizeEvent:function(){t(window).on("resize",i.debounce(function(){this.reloadParentSize()}.bind(this),300)),t(window).on("orientationchange",function(){this.reloadParentSize()}.bind(this))},createFotoramaEvent:function(){t(this.galleryPlaceholder).on("fotorama:load",this.updatePositionInFotorama.bind(this))},updatePositionInFotorama:function(){var t=this,i=this.parent.find(this.options.path),e=null;this&&this.options.path&&"prod"===this.options.mode&&i.length&&i!==this.parent&&(this.parent.css("position",""),this.parent=i,e=this.element.parent().hasClass(this.positionWrapper)?this.element.parent():this.element,i.append(e),i.css({position:"relative"}),t.setLabelsEventOnFotorama())},setLabelsEventOnFotorama:function(){var i=this,e=t(this.fotoramaStage),o=t._data(e[0],"events").mousedown,n=t._data(e[0],"events").pointerdown;e[0].eventsUpdated||(e.on("mousedown pointerdown",function(e){1===e.which&&t(e.target).is(i.imageLabel.join(","))&&(t(this).trigger("focusout"),i.openLink(e),e.stopImmediatePropagation())}),e.length&&o&&o.unshift(o.pop()),e.length&&n&&n.unshift(n.pop()),e[0].eventsUpdated=!0)},imageLoaded:function(t){return!(!t.complete||void 0!==t.naturalWidth&&0===t.naturalWidth)},productPageZoomEvent:function(){var i=t(this.mainContainerSelector);"prod"===this.options.mode&&i.length&&(this.parent=i,i.append(this.element.parent()),i.css("position","relative"))},updateStyles:function(){this.setLabelStyle(),this.setLabelPosition()},setStyleIfNotExist:function(t,i){for(var e in i){var o=t.attr("style");(!o||-1===o.indexOf("; "+e)&&-1===o.indexOf(";"+e))&&t.css(e,i[e])}},setLabelStyle:function(){var t,i,e,o,n=this.options.redirect_url,s=1===this.options.alignment?"inline-block":"block";if(this.setStyleIfNotExist(this.textElement,{padding:"0 3px",position:"absolute","box-sizing":"border-box","white-space":"nowrap",width:"100%"}),this.image.length){if(this.image.css({width:"100%"}),this.options.size>0){if(!(t=Math.round(this.parent.css("width").replace(/[^\d.]/g,""))))return void this.parentResizeListener.observe(this.parent[0]);t&&(this.parentResizeListener.disconnect(),this.imageWidth=Math.round(t*this.options.size/100))}else this.imageWidth+="px";this.setStyleIfNotExist(this.element,{width:this.imageWidth}),this.imageHeight=this.image.height(),!this.imageHeight&&this.image[0]&&0!==this.image[0].naturalWidth&&(i=this.image[0].naturalWidth,e=this.image[0].naturalHeight,this.imageHeight=Math.round(this.imageWidth*(e/i))),o=this.textElement.html().split("<br>").length,o=o>=1?o:1,this.textElement.css("lineHeight",Math.round(this.imageHeight/o)+"px"),this.imageHeight&&this.setStyleIfNotExist(this.element,{height:this.imageHeight+"px"}),this._fitLabelText()}this.image.attr("width",this.image.width()+"px").attr("height",this.image.height()+"px"),this.element.parent().css({"line-height":"normal",position:"absolute"}),this.element.hasClass("amlabel-swatch")||this.setStyleIfNotExist(this.element,{position:"relative",display:s}),n&&!this.isEmpty(n)&&this.element.addClass("-link"),this.reloadParentSize()},_fitLabelText:function(){if(this.options.size){var t=1;for(this.textElement.css({width:"auto"}),this.textElement.parent().css("display","block");this.textElement.width()>.9*this.textElement.parent().width()&&t++<15;)this.textElement.css({fontSize:100-5*t+"%"});this.textElement.parent().css("display","none"),this.textElement.css({width:"100%"})}},isEmpty:function(t){return null===t||null!==t.match(/^ *$/)},setPosition:function(t){this.options.position=t,this.setLabelPosition(),this.reloadParentSize()},setStyle:function(){this.setLabelStyle()},reloadParentSize:function(){var i=this.element.parent(),e=null,o=5;i.css({position:"relative",display:"inline-block",width:"auto",height:"auto"}),e=i.height(),1===this.options.alignment?i.children().each(function(i,e){o+=t(e).width()+parseInt(t(e).css("margin-left"),10)+parseInt(t(e).css("margin-right"),10)}):o=i.width(),i.css({position:"absolute",display:"block",height:e?e+"px":"",width:o?o+"px":""})},getWidgetLabelCode:function(){var t="";return this.element.parents(".widget-product-grid, .widget").length&&(t="widget"),t},setLabelPosition:function(){var i,e,o="amlabel-position-"+this.options.position+"-"+this.options.product+"-"+this.options.mode+this.getWidgetLabelCode(),n=this.parent.find("."+o);switch(n.length?(e=!1,t.each(n.find(".amasty-label-container"),function(i,o){var n=t(o).next(),s=parseInt(this.options.order,10),r=null,a=null;if(t(o).length&&t(o).data("mageAmShowLabel")&&(r=parseInt(t(o).data("mageAmShowLabel").options.order,10)),n.length&&t(n).data("mageAmShowLabel")&&(a=parseInt(n.data("mageAmShowLabel").options.order,10)),s>=r&&(!a||s<=a))return e=!0,t(o).after(this.element),!1}.bind(this)),e||n.prepend(this.element)):(i=this.element.parent(),i.hasClass(this.positionWrapper)&&i.parent().html(this.element),this.element.wrap('<div class="'+o+" "+this.positionWrapper+'"></div>'),n=this.element.parent()),1===this.options.alignment?n.children(":not(:first-child)").each(function(i,e){this.setStyleIfNotExist(t(e),{marginLeft:this.options.margin+"px"})}.bind(this)):n.children(":not(:first-child)").each(function(i,e){this.setStyleIfNotExist(t(e),{marginTop:this.options.margin+"px"})}.bind(this)),n.css({top:"",left:"",right:"",bottom:"","margin-top":"","margin-bottom":"","margin-left":"","margin-right":""}),this.options.position){case"top-left":n.css({top:0,left:0});break;case"top-center":n.css({top:0,left:0,right:0,"margin-left":"auto","margin-right":"auto"});break;case"top-right":n.css({top:0,right:0,"text-align":"right"});break;case"middle-left":n.css({left:0,top:0,bottom:0,"margin-top":"auto","margin-bottom":"auto"});break;case"middle-center":n.css({top:0,bottom:0,"margin-top":"auto","margin-bottom":"auto",left:0,right:0,"margin-left":"auto","margin-right":"auto"});break;case"middle-right":n.css({top:0,bottom:0,"margin-top":"auto","margin-bottom":"auto",right:0,"text-align":"right"});break;case"bottom-left":n.css({bottom:0,left:0});break;case"bottom-center":n.css({bottom:0,left:0,right:0,"margin-left":"auto","margin-right":"auto"});break;case"bottom-right":n.css({bottom:0,right:0,"text-align":"right"})}},getNewParent:function(t){var i=null,e=t.closest(".item.product");return e.length||(e=t.closest(".product-item")),e&&e.length&&(i=e.find(this.options.path).first()),i},getPriceSelector:function(){var t=":not([label-observered-"+this.options.label+"])";return'[data-product-id="'+this.options.product+'"]'+t+', [id="product-price-'+this.options.product+'"]'+t+', [name="product"][value="'+this.options.product+'"]'+t}}),t.mage.amShowLabel}),function(t){define("matchMedia",[],function(){return function(){return window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var i=document.createElement("style"),e=document.getElementsByTagName("script")[0],o=null;i.type="text/css",i.id="matchmediajs-test",e?e.parentNode.insertBefore(i,e):document.head.appendChild(i),o="getComputedStyle"in window&&window.getComputedStyle(i,null)||i.currentStyle,t={matchMedium:function(t){var e="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return i.styleSheet?i.styleSheet.cssText=e:i.textContent=e,"1px"===o.width}}}return function(i){return{matches:t.matchMedium(i||"all"),media:i||"all"}}}()),function(){if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var t=window.matchMedia,i=t("only all").matches,e=!1,o=0,n=[],s=function(i){clearTimeout(o),o=setTimeout(function(){for(var i=0,e=n.length;i<e;i++){var o=n[i].mql,s=n[i].listeners||[],r=t(o.media).matches;if(r!==o.matches){o.matches=r;for(var a=0,l=s.length;a<l;a++)s[a].call(window,o)}}},30)};window.matchMedia=function(o){var r=t(o),a=[],l=0;return r.addListener=function(t){i&&(e||(e=!0,window.addEventListener("resize",s,!0)),0===l&&(l=n.push({mql:r,listeners:a})),a.push(t))},r.removeListener=function(t){for(var i=0,e=a.length;i<e;i++)a[i]===t&&a.splice(i,1)},r}}(),window.mediaCheck=function(t){function i(t,i){t.matches?"function"==typeof i.entry&&i.entry():"function"==typeof i.exit&&i.exit()}var e;e=window.matchMedia(t.media),e.addListener(function(){i(e,t)}),i(e,t)},t.mediaCheck=mediaCheck}.apply(t,arguments)})}(this),define("Amasty_Label/js/initLabel",["jquery","Amasty_Label/vendor/tooltipster/js/tooltipster.min","Amasty_Label/js/label","matchMedia","domReady!"],function(t,i){"use strict";return t.widget("mage.amInitLabel",{options:{mode:null,isAdminArea:null,config:null,productId:null,selector:null},classes:{amSearchSection:"amsearch-products-section"},tooltipVendorClass:"tooltip",mediaBreakpoint:"all and (max-width: 768px)",_create:function(){var t=this,i=t.element.closest(".product-item, .item");this.element.parent().hasClass(this.classes.amSearchSection)&&this.element.parent().find(this.options.selector).length>1||(this.renderTooltip(),"prod"===t.options.mode||t.options.isAdminArea||t.element.hasClass("amlabel-swatch")||t.isIE()?t.execLabel():"cat"===t.options.mode&&i.length&&!t.element.hasClass("amlabel-swatch")?t._handleIntersect(i):t.execLabel())},execLabel:function(){this.element.amShowLabel(this.options.config)},isIE:function(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1},renderTooltip:function(){var i=this.options.config.tooltip,e=decodeURIComponent(i.content);this._isHiddenOnMobile()||+i.status>1&&e&&!this._isEmpty(e)&&this.element.addClass(this.tooltipVendorClass).tooltipster({theme:"tooltipster-shadow",interactive:!0,content:t("<span>",{html:e}),styles:{backgroundColor:i.backgroundColor,textColor:i.color}})},_isEmpty:function(t){return null===t||null!==t.match(/^ *$/)},_isHiddenOnMobile:function(){return matchMedia(this.mediaBreakpoint).matches&&3==+this.options.config.tooltip.status},_handleIntersect:function(t){var i,e=this;i=new IntersectionObserver(function(t){t[0].isIntersecting&&(e.execLabel(),i.disconnect())}),i.observe(t[0])}}),t.mage.amInitLabel}),define("bundles/category-product",function(){});
//# sourceMappingURL=category-product.js.map